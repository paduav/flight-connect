<!-- FlightConnect schedules.html -->

<html>

    <head>
        <title>Schedules - FlightConnect</title>
        <link rel="stylesheet" href="/css/main.css">

        <!-- Leaflet CSS and JS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

        <script src="/js/schedules.js" defer></script>
    </head>

    <body class="mainBody">

        <header class="header">
            <h1 class="title">FlightConnect</h1>
            <nav class="navBar">
                <ul>
                    <li><button class="button-74" onclick="window.location.href='/dashboard'">Home</button></li>

                    <li><button class="button-74" onclick="window.location.href='/schedules'">Schedules</button></li>

                    <li><button class="button-74" onclick="window.location.href='/about'">About</button></li>
                </ul>
            </nav>
        </header>


        <br>
        <h1>Flight Schedules</h1>

        <!-- REFRESH DATA - HIT AVIATIONSTACK API -->
        <button id="refreshDataButton">Refresh Flight Data</button>

        <br><br>
        <div id="schedulesContainer">
            <div id="leftPanel">
                <h2>Passengers</h2>
                <button id="reissueTickets">
                    Reissue Tickets (Not Checked In)
                </button>

                <br>
                <div id="passengersContainer">
                    <p>Select a flight to view passengers.</p>
                </div>
            </div>

            <div id="rightPanel">
                <h2>Timetable</h2>

                <input type="text" id="flightSearch" placeholder="Search by flight, origin, destination...">
                <div id="filterBox">
                    <button id="sortDelay">Sort by Delay</button>
                </div>
                <br>
                <label class="live-toggle">
                    <input type="checkbox" id="liveOnlyToggle">
                    Show live tracking flights only
                </label>

                <br>
                <div id="timeTableContainer">
                    <table id="timeTable">
                        <thead>
                            <tr>
                                <th>Flight Number</th>
                                <th>Origin</th>
                                <th>Destination</th>
                                <th>Departure Time</th>
                                <th>Arrival Time</th>
                                <th>Delay</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- rows will populate dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <br>
        <div id="mapContainer">
            <h1>Map</h1>
            <div id="flightMap">

            </div>
        </div>

        <br><br>
        <div id="helpContainer">
            <h2>Help</h2>
            <ul>
                <br>
                <h3>Tip: Refresh the page regularly or click the "Refresh Flight Data" Button for the most accurate and up-to-date information!</h3>
                <br>
                <h3>Searching & Sorting</h3>
                <li>Use the search box to search for flights by flight number, origin, or destination.</li>
                <li>Click "Sort by Delay" to sort flights from longest delay to shortest.</li>
                <li>Toggle "Show live tracking flights only" to display only flights with live tracking data.</li>
    
                <h3>Viewing Passengers & Reissuing Tickets</h3>
                <li>Select a flight from the timetable to view its passengers in the left panel.</li>
                <li>Click "Reissue Tickets" to reissue tickets for passengers who have not checked in.</li>
    
                <h3>Map</h3>
                <li>The map displays the current locations of flights with live tracking data.</li>
            </ul>
        </div>
    </body>

    <div id="loadingOverlay">
        <div class="progress-wrapper">
            <p id="progressText">Initializingâ€¦</p>
            <div class="progress-bar">
                <div id="progressFill"></div>
            </div>
        </div>
    </div>
</html>